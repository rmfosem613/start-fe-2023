<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>DOM</title>
    <style>
      body {
        padding: 10px;
      }

      .box {
        width: 100px;
        height: 30px;
        background-color: #ddd;
      }

      .red {
        background-color: red;
      }
    </style>
  </head>

  <body>
    <div>
      <input type="text" class="txt" value="hello" />
      <button class="text-btn">TEXT 넣기</button>
      <br />
      <button class="add-red">빨간색으로</button>
      <button class="add-btn">추가</button>
      <button class="delete-btn">삭제</button>
      <button class="reset-btn">초기화</button>
      <button class="toggle-btn">보이기,숨기기 토글</button>
      <button class="image-btn">이미지</button>
    </div>

    <div class="box"></div>

    <script>
      // 문제1
      // .add-red 버튼 요소를 선택합니다.
      const addRedBtn = document.querySelector(".add-red");
      // .add-red 버튼을 클릭했을 때 실행할 함수를 정의합니다.
      // 방법 1)의 결과 -> box 엘리먼트 2개 이상을 추가했을 때는 적용되지 않음.
      // function addRedToBox() {
      //     const box = document.querySelector('.box');
      //     box.classList.add('red');
      // }
      // 방법 2)
      function addRedToBox() {
        const boxes = document.querySelectorAll(".box");
        boxes.forEach((box) => {
          box.classList.add("red");
        });
      }
      // addRedBtn 요소에 click 이벤트 리스너를 등록합니다.
      addRedBtn.addEventListener("click", addRedToBox);

      // 문제2
      // .add-btn 버튼 요소를 선택합니다.
      const addBtn = document.querySelector(".add-btn");
      // .add-btn 버튼을 클릭했을 때 실행할 함수를 정의합니다.
      function addBoxToBody() {
        // body 요소를 선택합니다.
        const body = document.querySelector("body");
        // 새로운 div 엘리먼트를 생성합니다.
        const newBox = document.createElement("div");
        newBox.classList.add("box");
        // body에 새로운 div 엘리먼트를 추가합니다.
        body.appendChild(newBox);
      }
      // addBtn 요소에 click 이벤트 리스너를 등록합니다.
      addBtn.addEventListener("click", addBoxToBody);

      // 문제3
      // .delete-btn 버튼 요소를 선택합니다.
      const deleteBtn = document.querySelector(".delete-btn");
      // .delete-btn 버튼을 클릭했을 때 실행할 함수를 정의합니다.
      function deleteBox() {
        // 첫 번째 .box 엘리먼트를 선택합니다.
        const box = document.querySelector(".box");
        // .box 엘리먼트가 있으면 하나씩 삭제합니다.
        if (box) {
          box.remove();
        }
      }
      // deleteBtn 요소에 click 이벤트 리스너를 등록합니다.
      deleteBtn.addEventListener("click", deleteBox);

      // 문제4
      // .text-btn 버튼 요소를 선택합니다.
      const textBtn = document.querySelector(".text-btn");
      // .text-btn 버튼을 클릭했을 때 실행할 함수를 정의합니다.
      function addText() {
        // .txt 엘리먼트를 선택합니다.
        const txt = document.querySelector(".txt");
        // .txt 엘리먼트의 value 값을 가져옵니다.
        const textValue = txt.value;
        // 모든 .box 엘리먼트를 선택합니다.
        const boxes = document.querySelectorAll(".box");
        // 각 .box 엘리먼트에 value 값을 추가합니다.
        boxes.forEach((box) => {
          const textNode = document.createTextNode(textValue);
          box.appendChild(textNode);
        });
      }
      // textBtn 요소에 click 이벤트 리스너를 등록합니다.
      textBtn.addEventListener("click", addText);

      // 문제5
      // .reset-btn 버튼 요소를 선택합니다.
      const resetBtn = document.querySelector(".reset-btn");
      // .reset-btn 버튼을 클릭했을 때 실행할 함수를 정의합니다.
      function resetBoxes() {
        // 모든 .box 엘리먼트를 선택합니다.
        const boxes = document.querySelectorAll(".box");
        // 각 .box 엘리먼트를 순회하면서 제거합니다.
        boxes.forEach((box) => {
          box.remove();
        });
      }
      // resetBtn 요소에 click 이벤트 리스너를 등록합니다.
      resetBtn.addEventListener("click", resetBoxes);

      // 문제6
      // .toggle-btn 버튼 요소를 선택합니다.
      const toggleBtn = document.querySelector(".toggle-btn");
      // .toggle-btn 버튼을 클릭했을 때 실행할 함수를 정의합니다.
      function toggleBoxes() {
        // 모든 .box 엘리먼트를 선택합니다.
        const boxes = document.querySelectorAll(".box");
        // 각 .box 엘리먼트를 순회하면서 display 속성을 토글합니다.
        boxes.forEach((box) => {
          if (box.style.display === "none") {
            box.style.display = "block";
          } else {
            box.style.display = "none";
          }
        });
      }
      // toggleBtn 요소에 click 이벤트 리스너를 등록합니다.
      toggleBtn.addEventListener("click", toggleBoxes);

      // 문제7
      // .image-btn 버튼 요소를 선택합니다.
      const imageBtn = document.querySelector(".image-btn");
      // .image-btn 버튼을 클릭했을 때 실행할 함수를 정의합니다.
      function addImageToBoxes() {
        // 모든 .box 엘리먼트를 선택합니다.
        const boxes = document.querySelectorAll(".box");
        // .box 엘리먼트가 없는 경우, 새로운 엘리먼트를 생성합니다.
        if (boxes.length === 0) {
          const newBox = document.createElement("div");
          newBox.classList.add("box");
          document.body.appendChild(newBox);
          boxes.push(newBox);
        }
        // 각 .box 엘리먼트에 이미지를 추가합니다.
        boxes.forEach((box) => {
          const img = document.createElement("img");
          img.src = "https://i.imgur.com/69NjYBH.png";
          box.innerHTML = "";
          box.appendChild(img);
        });
      }
      // imageBtn 요소에 click 이벤트 리스너를 등록합니다.
      imageBtn.addEventListener("click", addImageToBoxes);
    </script>
  </body>
</html>
